# 📝 产品需求文档：ShelfLife

## 一、产品概述

ShelfLife 是一款面向日常生活场景的“时间效期条目管理工具”。它帮助用户记录和管理生活中所有具有有效期限的事物或任务，并支持可选的消耗追踪和周期性提醒，从而减少遗忘、浪费和重复劳动。

🎯 核心目标

- 用统一模型表示生活中有“时间属性”的事物（包括任务与物品）
- 提供自动提醒，让用户知道什么时候该做什么、什么时候物品快用完了
- 支持循环有效期和消耗记录与分析
- 保持系统设计简洁、快速可用、低学习成本

## 二、核心概念设计

### 🧩 事物（Thing）

系统的最基本单位。每个事物代表一个“有有效期的事物”，可能是任务，也可能是物品。

#### 字段示意

| 字段                         | 是否必填 | 含义说明                                   |
| ---------------------------- | -------- | ------------------------------------------ |
| 名称                         | 是       | 用户填写的，如“苹果”、“吃药”               |
| 有效期                       | 是       | 事物的过期时间                             |
| 是否循环                     | 是       | 是否自动重复生成新的下一周期的事物         |
| 循环周期                     | 否       | 如每天、每周、每月、半年                   |
| 当前剩余数量                 | 否       | 事物剩余数量                               |
| 距离有效期前多久提醒即将过期 | 否       | 如 “1 小时”、“1 天”、“1 周”                |
| 标签                         | 否       | 当前事物的标签，比如“冰箱”、“食物”、“水果” |

## 三、前端页面设计（支持 pwa）

### 1️⃣ 事物列表

> 唯一的界面，事物所有的操作都在这个页面，极简设计

#### 功能点：

- 根据标签筛选出事物列表
- 添加事物：手动填写事物字段
- 修改事物
- 高亮显示即将过期或已过期条目
- 展示事物详情：弹窗展示事物具体信息与历史消耗记录
- 删除事物
- 消耗事物

## 四、后端模块设计

### 1️⃣ 事物管理模块

#### 功能点：

- 添加事物
- 删除事物
- 展示事物列表，按照最近过期时间排序，可按标签筛选
- 修改事物

### 2️⃣ 循环控制模块

#### 功能点：

- 针对已经消耗的事物重新添加一条事物，有效期自动加上循环周期

### 3️⃣ 消耗追踪模块

#### 功能点：

- 记录消耗的事物
- 如果可循环，交给循环控制模块
- 修改事物的剩余数量，如果为零则删除事物

### 4️⃣ 提醒通知模块

#### 功能点：

- 支持 webhook 通知，通知所有即将过期和已过期的事物

## 五、数据结构

### 事物 Thing

```ts
interface Thing {
  name: string;
  expireAt: number;
  isRecurring: boolean;
  recurringInterval?: number;
  notifyAt: number;
  quantity: number;
  tags: string[];
  createdAt: number;
  updatedAt: number;
}
```

### 消耗记录 ConsumptionRecord

```ts
interface ConsumptionRecord {
  id: string;
  thingName: string;
  timestamp: number;
}
```

### 标签 Tag

```ts
interface Tag {
  name: string;
}
```
